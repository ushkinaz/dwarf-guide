<html>
<head>
<title>
  Dwarven Guidance Counselor
</title>
<script type="text/javascript">

var bodyattr = [1250,900,1250,1000,1000,1000];

var soulattr = [1250,1250,1250,1000,1500,1000,1250,1500,1000,1000,1000,1000,1000];

var perstrait = [50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,55,50,50,50,50,50,50,50,55,50,50,45];

var changelog = [""];

var newbody = 0;
var newsoul = 0;
var newtrait = 0;

function disableEnterKey(e) {
  var key;
  if (window.event) {
    key = window.event.keyCode;
  } //IE
  else {
    key = e.which;
  }  //firefox

  return (key != 13);
}

function disablebodyenter(e) {
  var key;
  if (window.event) {
    key = window.event.keyCode;
  } //IE
  else {
    key = e.which;
  }  //firefox

  if (key == 13) {
    directbodysubmit();
    document.getElementById("directbodynum").value = ""
  }
  return (key != 13);
}

function disablesoulenter(e) {
  var key;
  if (window.event) {
    key = window.event.keyCode;
  } //IE
  else {
    key = e.which;
  }  //firefox

  if (key == 13) {
    directsoulsubmit();
    document.getElementById("directsoulnum").value = ""
  }
  return (key != 13);
}

function disablepersenter(e) {
  var key;
  if (window.event) {
    key = window.event.keyCode;
  } //IE
  else {
    key = e.which;
  }  //firefox

  if (key == 13) {
    directperssubmit();
    document.getElementById("directpersnum").value = ""
  }
  return (key != 13);
}

var xmlDoc;
var dwarfnames = [];
var dorfnum;
var microsoft;

function xmlupdate() {

  var xhttp = new XMLHttpRequest();
  try {
    xhttp.open('GET', 'Dwarves.xml', false);
    xhttp.send(null);
    xmlDoc = xhttp.responseXML;

  }
  catch (e) {
    microsoft = "yes";
    var xml = document.createElement("xml");
    xml.src = "Dwarves.xml";
    document.body.appendChild(xml);
    xmlDoc = xml.XMLDocument;
    document.body.removeChild(xml);
  }

  if (microsoft == "yes") {
    dorfnum = xmlDoc.getElementsByTagName("Creatures")[0].childNodes.length;
  }
  else {
    dorfnum = ((xmlDoc.getElementsByTagName("Creatures")[0].childNodes.length - 1) / 2);
  }
  dorfnum = parseInt(dorfnum);
  var i = 0;
  for (i = 0; i < dorfnum; i++) {
    try {
      dwarfnames[i] = xmlDoc.getElementsByTagName("Creature")[i].getElementsByTagName("Nickname")[0].childNodes[0]
              .nodeValue;
    }
    catch (e) {
      dwarfnames[i] = xmlDoc.getElementsByTagName("Creature")[i].getElementsByTagName("Name")[0].childNodes[0]
              .nodeValue;
    }
    var x = document.getElementById("dwarflist");
    var option = document.createElement("option");
    option.text = dwarfnames[i];
    x.options.add(option, x.options.length);
  }

  var i = 0;
  for (i = 0; i < dorfnum; i++) {
    try {
      dwarfnames[i] = xmlDoc.getElementsByTagName("Creature")[i].getElementsByTagName("Nickname")[0].childNodes[0]
              .nodeValue;
    }
    catch (e) {
      dwarfnames[i] = xmlDoc.getElementsByTagName("Creature")[i].getElementsByTagName("Name")[0].childNodes[0]
              .nodeValue;
    }
    var x = document.getElementById("dorfsfrom");
    var option = document.createElement("option");
    option.text = dwarfnames[i];
    x.options.add(option, x.options.length);
  }

  document.getElementById("dorfsfrom")[0].selected = true;

}

function changelogupdate() {
  changelog.length = 5;
  document.getElementById("changelogoutput").innerHTML = changelog.join("<br>");
}

function printname() {
  document.getElementById("printdwarf").innerHTML = document.getElementById("dwarfname").value;
  document.getElementById("printdwarf2").innerHTML = document.getElementById("dwarfname").value;
}

function printgender(gender) {
  if (document.getElementById("male").checked == true) {
    gender = "Male"
  } else {
    gender = "Female"
  }
  if (gender == "Male") {
    document.getElementById("printdwarfgender").innerHTML = "\u2642";
    document.getElementById("printdwarfgender2").innerHTML = "\u2642";
  }
  else {
    document.getElementById("printdwarfgender").innerHTML = "\u2640";
    document.getElementById("printdwarfgender2").innerHTML = "\u2640";
  }
}

function bodyupdate() {
  while (newbody < bodyattr.length) {
    document.getElementById("bodyattr" + newbody).innerHTML = bodyattr[newbody];
    newbody++;
  }
}

function soulupdate() {
  while (newsoul < soulattr.length) {
    document.getElementById("soulattr" + newsoul).innerHTML = soulattr[newsoul];
    newsoul++;
  }
}

function traitupdate() {
  while (newtrait < perstrait.length) {
    document.getElementById("perstrait" + newtrait).innerHTML = perstrait[newtrait];
    newtrait++;
  }
}

function xmlprocess() {
  bodyattr = [1250,900,1250,1000,1000,1000];

  soulattr = [1250,1250,1250,1000,1500,1000,1250,1500,1000,1000,1000,1000,1000];

  perstrait = [50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,55,50,50,50,50,50,50,50,55,50,50,45];

  i = 0;
  for (i = 0; i < bodyattr.length; i++) {
    document.getElementById("bodyattr" + i).innerHTML = bodyattr[i];
  }

  i = 0;
  for (i = 0; i < soulattr.length; i++) {
    document.getElementById("soulattr" + i).innerHTML = soulattr[i];
  }

  i = 0;
  for (i = 0; i < perstrait.length; i++) {
    document.getElementById("perstrait" + i).innerHTML = perstrait[i];
  }

  if (document.getElementById("dwarflist").selectedIndex == 0) {
    document.getElementById("dwarfname").value = "Urist McAverage";
    document.getElementById("printdwarf").innerHTML = document.getElementById("dwarfname").value;
    return;
  }
  var pick = (document.getElementById("dwarflist").selectedIndex - 1);

  document.getElementById("dwarfname").value = dwarfnames[pick];
  printname();

  if (xmlDoc.getElementsByTagName("Sex")[pick].childNodes[0].nodeValue == "Male") {
    document.getElementById("male").checked = true;
    var gender = "Male";
  }
  else if (xmlDoc.getElementsByTagName("Sex")[pick].childNodes[0].nodeValue == "Female") {
    document.getElementById("female").checked = true;
    var gender = "Female";
  }
  printgender(gender);

  bodyattr[0] = xmlDoc.getElementsByTagName("Strength")[pick].childNodes[0].nodeValue;
  bodyattr[1] = xmlDoc.getElementsByTagName("Agility")[pick].childNodes[0].nodeValue;
  bodyattr[2] = xmlDoc.getElementsByTagName("Toughness")[pick].childNodes[0].nodeValue;
  bodyattr[3] = xmlDoc.getElementsByTagName("Endurance")[pick].childNodes[0].nodeValue;
  bodyattr[4] = xmlDoc.getElementsByTagName("DiseaseResistance")[pick].childNodes[0].nodeValue;
  bodyattr[5] = xmlDoc.getElementsByTagName("Recuperation")[pick].childNodes[0].nodeValue;

  i = 0;
  for (i = 0; i < bodyattr.length; i++) {
    document.getElementById("bodyattr" + i).innerHTML = bodyattr[i];
  }

  soulattr[0] = xmlDoc.getElementsByTagName("AnalyticalAbility")[pick].childNodes[0].nodeValue;
  soulattr[1] = xmlDoc.getElementsByTagName("Memory")[pick].childNodes[0].nodeValue;
  soulattr[2] = xmlDoc.getElementsByTagName("Creatvity")[pick].childNodes[0].nodeValue;
  soulattr[3] = xmlDoc.getElementsByTagName("Intuition")[pick].childNodes[0].nodeValue;
  soulattr[4] = xmlDoc.getElementsByTagName("Focus")[pick].childNodes[0].nodeValue;
  soulattr[5] = xmlDoc.getElementsByTagName("Willpower")[pick].childNodes[0].nodeValue;
  soulattr[6] = xmlDoc.getElementsByTagName("Patience")[pick].childNodes[0].nodeValue;
  soulattr[7] = xmlDoc.getElementsByTagName("SpatialSense")[pick].childNodes[0].nodeValue;
  soulattr[8] = xmlDoc.getElementsByTagName("KinaestheticSense")[pick].childNodes[0].nodeValue;
  soulattr[9] = xmlDoc.getElementsByTagName("LinguisticAbility")[pick].childNodes[0].nodeValue;
  soulattr[10] = xmlDoc.getElementsByTagName("Musicality")[pick].childNodes[0].nodeValue;
  soulattr[11] = xmlDoc.getElementsByTagName("Empathy")[pick].childNodes[0].nodeValue;
  soulattr[12] = xmlDoc.getElementsByTagName("SocialAwareness")[pick].childNodes[0].nodeValue;

  i = 0;
  for (i = 0; i < soulattr.length; i++) {
    document.getElementById("soulattr" + i).innerHTML = soulattr[i];
  }

  var traitsperdorf = [];


  i = 0;
  for (i = 0; i < dorfnum; i++) {
    traitsperdorf[i] = xmlDoc.getElementsByTagName("Traits")[i].childNodes.length;
    if (microsoft == "yes") {
    }
    else {
      traitsperdorf[i] = (traitsperdorf[i] - 1) / 2;
    }
  }

  var traitstotal = [];
  traitstotal[0] = traitsperdorf[0];

  i = 1;
  for (i = 1; i < dorfnum; i++) {
    traitstotal[i] = parseInt(traitstotal[i - 1]) + parseInt(traitsperdorf[i]);
  }
  var dwarfpick = document.getElementById("dwarflist").selectedIndex;

  guide();
}


function directbodysubmit() {
  printname();
  printgender();

  var pick = document.getElementById("directbody").selectedIndex;
  bodyattr[pick] = document.getElementById("directbodynum").value;
  bodyattr[pick] = parseInt(bodyattr[pick], 10);
  if (isNaN(bodyattr[pick])) {
    bodyattr[pick] = document.getElementById("bodyattr" + pick).innerHTML;
    changelog.splice(0, 0, "Error! " + document.getElementById("directbody").options[pick]
            .text + " must be a number!");
    changelogupdate();
  }
  else if (bodyattr[pick] < 0 || bodyattr[pick] > 5000) {
    bodyattr[pick] = document.getElementById("bodyattr" + pick).innerHTML;
    changelog.splice(0, 0, "Error! " + document.getElementById("directbody").options[pick]
            .text + " must be between 0 and 5000!");
    changelogupdate();
  }
  else {
    document.getElementById("bodyattr" + pick).innerHTML = bodyattr[pick];
    changelog.splice(0, 0, document.getElementById("directbody").options[pick]
            .text + " set to " + bodyattr[pick] + " by User.");
    guide();
    changelogupdate();
  }
}


function directsoulsubmit() {
  printname();
  printgender();
  var pick = document.getElementById("directsoul").selectedIndex;
  soulattr[pick] = document.getElementById("directsoulnum").value;
  soulattr[pick] = parseInt(soulattr[pick], 10);
  if (isNaN(soulattr[pick])) {
    soulattr[pick] = document.getElementById("soulattr" + pick).innerHTML;
    changelog.splice(0, 0, "Error! " + document.getElementById("directsoul").options[pick]
            .text + " must be a number!");
    changelogupdate();
  }
  else if (soulattr[pick] < 0 || soulattr[pick] > 5000) {
    soulattr[pick] = document.getElementById("soulattr" + pick).innerHTML;
    changelog.splice(0, 0, "Error! " + document.getElementById("directsoul").options[pick]
            .text + " must be between 0 and 5000!");
    changelogupdate();
  }
  else {
    document.getElementById("soulattr" + pick).innerHTML = soulattr[pick];
    changelog.splice(0, 0, document.getElementById("directsoul").options[pick]
            .text + " set to " + soulattr[pick] + " by User.");
    guide();
    changelogupdate();
  }
}


function directperssubmit() {
  printname();
  printgender();
  var pick = document.getElementById("directpers").selectedIndex;
  perstrait[pick] = document.getElementById("directpersnum").value;
  perstrait[pick] = parseInt(perstrait[pick], 10);
  if (isNaN(perstrait[pick])) {
    perstrait[pick] = document.getElementById("perstrait" + pick).innerHTML;
    changelog.splice(0, 0, "Error! " + document.getElementById("directpers").options[pick]
            .text + " must be a number!");
    changelogupdate();
  }
  else if (perstrait[pick] < 0 || perstrait[pick] > 100) {
    perstrait[pick] = document.getElementById("perstrait" + pick).innerHTML;
    changelog.splice(0, 0, "Error! " + document.getElementById("directpers").options[pick]
            .text + " must be between 0 and 100!");
    changelogupdate();
  }
  else {
    document.getElementById("perstrait" + pick).innerHTML = perstrait[pick];
    changelog.splice(0, 0, document.getElementById("directpers").options[pick]
            .text + " set to " + perstrait[pick] + " by User.");
    guide();
    changelogupdate();
  }
}

var superbname = [];
var verygoodname = [];
var goodname = [];
var highavgname = [];
var lowavgname = [];
var poorname = [];
var verypoorname = [];
var horriblename = [];
var deekname = [];


function bestdorf() {

  var pick = document.getElementById("joblist").selectedIndex;

  var dorfallattrs = [];
  var dorfbodyattrs = [];
  var dorfsoulattrs = [];
  var attrsum = [];
  var skillcomp = [];
  var ratelist = [];
  var ratejob = document.getElementById("joblist").options[pick].text;
  var skilleval;
  var fortsum = 0;
  var fortavg = 0;
  var dwarfworth = 0;

  function strbest() {
    return plusattrtopct(skilleval[0]);
  }

  function agibest() {
    return minusattrtopct(skilleval[1]);
  }

  function tuffbest() {
    return plusattrtopct(skilleval[2]);
  }

  function endrbest() {
    return avgattrtopct(skilleval[3]);
  }

  function disresbest() {
    return avgattrtopct(skilleval[4]);
  }

  function recupbest() {
    return avgattrtopct(skilleval[5]);
  }

  function anabbest() {
    return plusattrtopct(skilleval[6]);
  }

  function membest() {
    return plusattrtopct(skilleval[7]);
  }

  function crebest() {
    return plusattrtopct(skilleval[8]);
  }

  function intubest() {
    return avgattrtopct(skilleval[9]);
  }

  function focbest() {
    return dubplusattrtopct(skilleval[10]);
  }

  function willbest() {
    return avgattrtopct(skilleval[11]);
  }

  function patbest() {
    return plusattrtopct(skilleval[12]);
  }

  function spabest() {
    return dubplusattrtopct(skilleval[13]);
  }

  function kinbest() {
    return avgattrtopct(skilleval[14]);
  }

  function lingbest() {
    return avgattrtopct(skilleval[15]);
  }

  function musbest() {
    return avgattrtopct(skilleval[16]);
  }

  function empbest() {
    return avgattrtopct(skilleval[17]);
  }

  function socbest() {
    return avgattrtopct(skilleval[18]);
  }

  i = 0;
  for (i = 0; i < dorfnum; i++) {
    dorfbodyattrs[0] = xmlDoc.getElementsByTagName("Strength")[i].childNodes[0].nodeValue;
    dorfbodyattrs[1] = xmlDoc.getElementsByTagName("Agility")[i].childNodes[0].nodeValue;
    dorfbodyattrs[2] = xmlDoc.getElementsByTagName("Toughness")[i].childNodes[0].nodeValue;
    dorfbodyattrs[3] = xmlDoc.getElementsByTagName("Endurance")[i].childNodes[0].nodeValue;
    dorfbodyattrs[4] = xmlDoc.getElementsByTagName("DiseaseResistance")[i].childNodes[0].nodeValue;
    dorfbodyattrs[5] = xmlDoc.getElementsByTagName("Recuperation")[i].childNodes[0].nodeValue;

    dorfsoulattrs[0] = xmlDoc.getElementsByTagName("AnalyticalAbility")[i].childNodes[0].nodeValue;
    dorfsoulattrs[1] = xmlDoc.getElementsByTagName("Memory")[i].childNodes[0].nodeValue;
    dorfsoulattrs[2] = xmlDoc.getElementsByTagName("Creatvity")[i].childNodes[0].nodeValue;
    dorfsoulattrs[3] = xmlDoc.getElementsByTagName("Intuition")[i].childNodes[0].nodeValue;
    dorfsoulattrs[4] = xmlDoc.getElementsByTagName("Focus")[i].childNodes[0].nodeValue;
    dorfsoulattrs[5] = xmlDoc.getElementsByTagName("Willpower")[i].childNodes[0].nodeValue;
    dorfsoulattrs[6] = xmlDoc.getElementsByTagName("Patience")[i].childNodes[0].nodeValue;
    dorfsoulattrs[7] = xmlDoc.getElementsByTagName("SpatialSense")[i].childNodes[0].nodeValue;
    dorfsoulattrs[8] = xmlDoc.getElementsByTagName("KinaestheticSense")[i].childNodes[0].nodeValue;
    dorfsoulattrs[9] = xmlDoc.getElementsByTagName("LinguisticAbility")[i].childNodes[0].nodeValue;
    dorfsoulattrs[10] = xmlDoc.getElementsByTagName("Musicality")[i].childNodes[0].nodeValue;
    dorfsoulattrs[11] = xmlDoc.getElementsByTagName("Empathy")[i].childNodes[0].nodeValue;
    dorfsoulattrs[12] = xmlDoc.getElementsByTagName("SocialAwareness")[i].childNodes[0].nodeValue;

    dorfallattrs[i] = dorfbodyattrs.concat(dorfsoulattrs);
  }

  if (pick == 0) {
    document.getElementById("printdwarf2").innerHTML = "\u263C " + "Your Embark";
    document.getElementById("printdwarfgender2").innerHTML = "\u263C";

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      skilleval = dorfallattrs[i].toString();
      skilleval = skilleval.split(",");
      attrsum[i] = 0;

      x = 0;
      for (x = 0; x < 19; x++) {

        skilleval[x] = parseInt(skilleval[x]);
        attrsum[i] = parseInt(attrsum[i]) + parseInt(skilleval[x]);

      }

    }

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      fortsum = fortsum + attrsum[i];

    }

    fortavg = Math.round(fortsum / dorfnum);
    fortavg = Math.round(((fortavg * 89) / 1976) - (916735 / 988));
    dwarfworth = Math.round((fortsum * 100) / 21835) / 100;
    document.getElementById("guidance")
            .innerHTML = "Your " + dorfnum + " dwarves have the attribute points of " + dwarfworth + " average dwarves. If this is your starting seven, about " + fortavg + " percent of embarks will have as many or fewer attribute points as this embark.";

    return;
  }

// LEADER/MANAGER (not low straightforwardness, not low cooperation, organizer, socializer)
  i = 0;
  for (i = 0; i < dorfnum; i++) {

    if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
            .selected == true) {
      var traitsperdorf = [];
      var traitList = [];
      traitsperdorf[i] = xmlDoc.getElementsByTagName("Traits")[i].childNodes.length;
      if (microsoft == "yes") {
      }
      else {
        traitsperdorf[i] = (traitsperdorf[i] - 1) / 2;
      }
      if (pick == 1) {

        x = 0;
        for (x = 0; x < traitsperdorf[i]; x++) {
          traitList[x] = xmlDoc.getElementsByTagName("Traits")[i].getElementsByTagName("Trait")[x]
                  .childNodes[0].nodeValue;
          traitList[x] = traitList[x].toLowerCase();
        }

        traitList = traitList.toString();

        if (traitList.search("to compromise with somebody else") != -1) {
          skillcomp[i] = "deek";
          ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
        }
        else if (traitList.search("rather intimidate others") != -1) {
          skillcomp[i] = "deek";
          ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
        }
        else if (traitList.search("like to compromise") != -1) {
          skillcomp[i] = "deek";
          ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
        }
        else if (traitList.search("some deception is necessary") != -1) {
          skillcomp[i] = "deek";
          ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
        }
        else if (traitList.search("not straightforward") != -1) {
          skillcomp[i] = "deek";
          ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
        }
        else if (traitList.search("guarded in relationships") != -1) {
          skillcomp[i] = "deek";
          ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
        }

        else {

          skilleval = dorfallattrs[i].toString();
          skilleval = skilleval.split(",");

          skillcomp[i] = anabbest() + crebest() + socbest() + lingbest() + empbest() + socbest();
          skillcomp[i] = Math.round(skillcomp[i] / 6);
          ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
        }

      }
    }
  }

// BROKER (joi, appraiser, socializer)
  if (pick == 2) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = intubest() + empbest() + socbest() + anabbest() + membest() + intubest() + lingbest() + empbest() + socbest();
        skillcomp[i] = Math.round(skillcomp[i] / 9);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }

    }
  }

// CLOSE COMBAT DWARF SATWSsKs
  if (pick == 3) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = strbest() + agibest() + tuffbest() + willbest() + spabest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 6);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// RANGED COMBAT DWARF SURGEON SUTURER AFSsKs
  if (pick == 4 || pick == 18 || pick == 19) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = agibest() + focbest() + spabest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 4);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// SOCIALIZER LEmSa
  if (pick == 5) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = lingbest() + empbest() + socbest();
        skillcomp[i] = Math.round(skillcomp[i] / 3);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// MINER BITER STEWSsKs
  if (pick == 6 || pick == 64) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = strbest() + tuffbest() + endrbest() + willbest() + spabest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 6);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// BOWYER ENGRAVER GEM SETTER BONE CARVER CLOTHIER STONE CRAFTER WEAVER WOOD CRAFTER ACSsKs
  if (pick == 7 || pick == 10 || pick == 45 || pick == 46 || pick == 47 || pick == 50 || pick == 51 || pick == 52) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = agibest() + crebest() + spabest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 4);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// CARPENTER SACSsKs
  if (pick == 8) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = strbest() + agibest() + crebest() + spabest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 5);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// WOOD CUTTER SWIMMER WRESTLER SAEWSsKs
  if (pick == 9 || pick == 58 || pick == 66) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = strbest() + agibest() + endrbest() + willbest() + spabest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 6);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// MASON ARMORSMITH METAL CRAFTER METALSMITH WEAPONSMITH GLASSMAKER LEATHERWORKER SAECSsKs
  if (pick == 11 || pick == 39 || pick == 41 || pick == 42 || pick == 43 || pick == 48 || pick == 49) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = strbest() + agibest() + endrbest() + willbest() + spabest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 6);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// ANIMAL DISSECTOR TANNER FISH DISSECTOR AKs
  if (pick == 12 || pick == 33 || pick == 37) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = agibest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 2);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// ANIMAL TRAINER ATEIPEm
  if (pick == 13) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = agibest() + tuffbest() + endrbest() + intubest() + patbest() + empbest();
        skillcomp[i] = Math.round(skillcomp[i] / 6);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// TRAPPER AAaCSs
  if (pick == 14) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = agibest() + anabbest() + crebest() + spabest();
        skillcomp[i] = Math.round(skillcomp[i] / 4);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// BONE DOCTOR SAFSsKs
  if (pick == 15) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = strbest() + agibest() + focbest() + spabest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 5);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// CRUTCH WALKER AEWSsKs
  if (pick == 16) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = agibest() + endrbest() + willbest() + spabest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 5);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// DIAGNOSTICIAN APPRAISER AaMI
  if (pick == 17 || pick == 59) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = anabbest() + membest() + intubest();
        skillcomp[i] = Math.round(skillcomp[i] / 3);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// WOUND DRESSER ASsKsEm
  if (pick == 20) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = agibest() + spabest() + kinbest() + empbest();
        skillcomp[i] = Math.round(skillcomp[i] / 4);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// BREWER SAKs
  if (pick == 21) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = strbest() + agibest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 3);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// BUTCHER DYER GROWER MILKER MILLER THRESHER SAEKs
  if (pick == 22 || pick == 25 || pick == 26 || pick == 29 || pick == 30 || pick == 34) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = strbest() + agibest() + endrbest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 4);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// CHEESE MAKER SAEAaCKs
  if (pick == 23) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = strbest() + agibest() + endrbest() + anabbest() + crebest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 6);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// COOK AAaCKs
  if (pick == 24) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = agibest() + anabbest() + crebest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 4);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// HERBALIST AMKs
  if (pick == 27) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = agibest() + membest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 3);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// LYE MAKER POTASH MAKER SOAPER WOOD BURNER STEKs
  if (pick == 28 || pick == 31 || pick == 32 || pick == 35) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = strbest() + tuffbest() + endrbest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 4);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// FISH CLEANER AEKs
  if (pick == 36) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = agibest() + endrbest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 3);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// FISHERDWARF SAFPKs
  if (pick == 38) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = strbest() + agibest() + focbest() + patbest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 5);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// FURNACE OPERATOR STEAaKs
  if (pick == 40) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = strbest() + tuffbest() + endrbest() + anabbest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 5);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// GEM CUTTER AAaSsKs
  if (pick == 44) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = agibest() + anabbest() + spabest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 4);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// STRAND EXTRACTOR SAEAaKs
  if (pick == 53) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = strbest() + agibest() + endrbest() + anabbest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 5);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// MECHANIC SIEGE ENGINEER SAEAaCSs
  if (pick == 54 || pick == 56) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = strbest() + agibest() + endrbest() + anabbest() + crebest() + spabest();
        skillcomp[i] = Math.round(skillcomp[i] / 6);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// PUMP OPERATOR ARMOR USER STEWKs
  if (pick == 55 || pick == 63) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = strbest() + tuffbest() + endrbest() + willbest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 5);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// SIEGE OPERATOR STEAaFSs
  if (pick == 57) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = strbest() + tuffbest() + endrbest() + anabbest() + focbest() + spabest();
        skillcomp[i] = Math.round(skillcomp[i] / 6);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// BUILDING DESIGNER AaCSs
  if (pick == 60) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = anabbest() + crebest() + spabest();
        skillcomp[i] = Math.round(skillcomp[i] / 3);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// ORGANIZER AaCSa
  if (pick == 61) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = anabbest() + crebest() + socbest();
        skillcomp[i] = Math.round(skillcomp[i] / 3);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// RECORD KEEPER STUDENT AaMF
  if (pick == 62 || pick == 72) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = anabbest() + membest() + focbest();
        skillcomp[i] = Math.round(skillcomp[i] / 3);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// DODGER ATEWSsKs
  if (pick == 65) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = agibest() + tuffbest() + endrbest() + willbest() + spabest() + kinbest();
        skillcomp[i] = Math.round(skillcomp[i] / 6);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// COMEDIAN (not high self-consciousness, ACKsL)
  i = 0;
  for (i = 0; i < dorfnum; i++) {

    if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
            .selected == true) {
      var traitsperdorf = [];
      var dorftraitlist = [];
      traitsperdorf[i] = xmlDoc.getElementsByTagName("Traits")[i].childNodes.length;
      if (microsoft == "yes") {
      }
      else {
        traitsperdorf[i] = (traitsperdorf[i] - 1) / 2;
      }
      if (pick == 67) {

        x = 0;
        for (x = 0; x < traitsperdorf[i]; x++) {
          dorftraitlist[x] = xmlDoc.getElementsByTagName("Traits")[i].getElementsByTagName("Trait")[x]
                  .childNodes[0].nodeValue;
          dorftraitlist[x] = dorftraitlist[x].toLowerCase();
        }

        dorftraitlist = dorftraitlist.toString();

        if (dorftraitlist.search("socially cripplied") != -1) {
          skillcomp[i] = "deek";
          ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
        }
        else if (dorftraitlist.search("rejection and ridicule") != -1) {
          skillcomp[i] = "deek";
          ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
        }

        else {


          skilleval = dorfallattrs[i].toString();
          skilleval = skilleval.split(",");

          skillcomp[i] = agibest() + crebest() + kinbest() + lingbest();
          skillcomp[i] = Math.round(skillcomp[i] / 4);
          ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
        }
      }
    }

  }

// INTIMIDATOR (not high cooperation, AKsL)
  i = 0;
  for (i = 0; i < dorfnum; i++) {

    if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
            .selected == true) {
      var traitsperdorf = [];
      var dorftraitlist = [];
      traitsperdorf[i] = xmlDoc.getElementsByTagName("Traits")[i].childNodes.length;
      if (microsoft == "yes") {
      }
      else {
        traitsperdorf[i] = (traitsperdorf[i] - 1) / 2;
      }
      if (pick == 68) {

        x = 0;
        for (x = 0; x < traitsperdorf[i]; x++) {
          dorftraitlist[x] = xmlDoc.getElementsByTagName("Traits")[i].getElementsByTagName("Trait")[x]
                  .childNodes[0].nodeValue;
          dorftraitlist[x] = dorftraitlist[x].toLowerCase();
        }

        dorftraitlist = dorftraitlist.toString();

        if (dorftraitlist.search("needs to get along with others") != -1) {
          skillcomp[i] = "deek";
          ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
        }
        else if (dorftraitlist.search("dislikes confrontations") != -1) {
          skillcomp[i] = "deek";
          ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
        }
        else if (dorftraitlist.search("willing to compromise") != -1) {
          skillcomp[i] = "deek";
          ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
        }

        else {


          skilleval = dorfallattrs[i].toString();
          skilleval = skilleval.split(",");

          skillcomp[i] = agibest() + kinbest() + lingbest();
          skillcomp[i] = Math.round(skillcomp[i] / 3);
          ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
        }
      }
    }

  }

// JUDGE OF INTENT IEmSa
  if (pick == 69) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = intubest() + empbest() + socbest();
        skillcomp[i] = Math.round(skillcomp[i] / 3);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

// LIAR (low straightforwardness, CLSa)
  i = 0;
  for (i = 0; i < dorfnum; i++) {

    if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
            .selected == true) {
      var traitsperdorf = [];
      var dorftraitlist = [];
      traitsperdorf[i] = xmlDoc.getElementsByTagName("Traits")[i].childNodes.length;
      if (microsoft == "yes") {
      }
      else {
        traitsperdorf[i] = (traitsperdorf[i] - 1) / 2;
      }
      if (pick == 70) {

        x = 0;
        for (x = 0; x < traitsperdorf[i]; x++) {
          dorftraitlist[x] = xmlDoc.getElementsByTagName("Traits")[i].getElementsByTagName("Trait")[x]
                  .childNodes[0].nodeValue;
          dorftraitlist[x] = dorftraitlist[x].toLowerCase();
        }

        dorftraitlist = dorftraitlist.toString();

        if (dorftraitlist.search("some deception is necessary") >= 1) {
          isliar();
        }
        else if (dorftraitlist.search("not straightforward") >= 1) {
          isliar();
        }
        else if (dorftraitlist.search("guarded in relationships") >= 1) {
          isliar();
        }
        else {
          skillcomp[i] = "deek";
          ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
        }

        function isliar() {


          skilleval = dorfallattrs[i].toString();
          skilleval = skilleval.split(",");

          skillcomp[i] = crebest() + lingbest() + socbest();
          skillcomp[i] = Math.round(skillcomp[i] / 3);
          ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
        }
      }
    }

  }

// OBSERVER IFSs
  if (pick == 71) {

    i = 0;
    for (i = 0; i < dorfnum; i++) {

      if (document.getElementById("dorfsfrom")[0].selected == true || document.getElementById("dorfsfrom")[i + 1]
              .selected == true) {
        skilleval = dorfallattrs[i].toString();
        skilleval = skilleval.split(",");

        skillcomp[i] = intubest() + focbest() + spabest();
        skillcomp[i] = Math.round(skillcomp[i] / 3);
        ratelist[i] = namerate(dwarfnames[i], skillcomp[i]);
      }
    }
  }

  if (superbname.length >= 1) {
    superbname.splice(0, 0, "You are lucky to have a superb " + ratejob + " in");
    superbname[(superbname.length - 1)] = superbname[(superbname.length - 1)].replace(/;/g, ".");
  }
  if (superbname.length >= 3) {
    superbname[(superbname.length - 2)] = superbname[(superbname.length - 2)] + " and ";
  }
  if (verygoodname.length >= 1) {
    verygoodname.splice(0, 0, "You'll have a very good " + ratejob + " in");
    verygoodname[(verygoodname.length - 1)] = verygoodname[(verygoodname.length - 1)].replace(/;/g, ".");
  }
  if (verygoodname.length >= 3) {
    verygoodname[(verygoodname.length - 2)] = verygoodname[(verygoodname.length - 2)] + " and ";
  }
  if (goodname.length >= 1) {
    goodname.splice(0, 0, "If you want a good " + ratejob + "; there's");
    goodname[(goodname.length - 1)] = goodname[(goodname.length - 1)].replace(/;/g, ".");
  }
  if (goodname.length >= 3) {
    goodname[(goodname.length - 2)] = goodname[(goodname.length - 2)] + " and ";
  }
  if (highavgname.length >= 1) {
    highavgname.splice(0, 0, " For a " + ratejob + " a bit above average; try");
    highavgname[(highavgname.length - 1)] = highavgname[(highavgname.length - 1)].replace(/;/g, ".");
  }
  if (highavgname.length >= 3) {
    highavgname[(highavgname.length - 2)] = highavgname[(highavgname.length - 2)] + " and ";
  }
  if (lowavgname.length >= 1) {
    lowavgname.splice(0, 0, "If you'll settle for a below average " + ratejob + "; there's");
    lowavgname[(lowavgname.length - 1)] = lowavgname[(lowavgname.length - 1)].replace(/;/g, ".");
  }
  if (lowavgname.length >= 3) {
    lowavgname[(lowavgname.length - 2)] = lowavgname[(lowavgname.length - 2)] + " and ";
  }
  if (poorname.length >= 1) {
    poorname.splice(0, 0, "You will have a poor " + ratejob + " in");
    poorname[(poorname.length - 1)] = poorname[(poorname.length - 1)].replace(/;/g, ".");
  }
  if (poorname.length >= 3) {
    poorname[(poorname.length - 2)] = poorname[(poorname.length - 2)] + " and ";
  }
  if (verypoorname.length >= 1) {
    verypoorname.splice(0, 0, "You'll have a very poor " + ratejob + " in");
    verypoorname[(verypoorname.length - 1)] = verypoorname[(verypoorname.length - 1)].replace(/;/g, ".");
  }
  if (verypoorname.length >= 3) {
    verypoorname[(verypoorname.length - 2)] = verypoorname[(verypoorname.length - 2)] + " and ";
  }
  if (horriblename.length >= 1) {
    horriblename.splice(0, 0, "You're unlucky to have a horrible " + ratejob + " in");
    horriblename[(horriblename.length - 1)] = horriblename[(horriblename.length - 1)].replace(/;/g, ".");
  }
  if (horriblename.length >= 3) {
    horriblename[(horriblename.length - 2)] = horriblename[(horriblename.length - 2)] + " and ";
  }
  if (deekname.length >= 1) {
    deekname.splice(0, 0, "The following dwarves cannot be a " + ratejob + " because of personality problems:");
    deekname[(deekname.length - 1)] = deekname[(deekname.length - 1)].replace(/;/g, ".");
  }
  if (deekname.length >= 3) {
    deekname[(deekname.length - 2)] = deekname[(deekname.length - 2)] + " and ";
  }
  document.getElementById("printdwarf2").innerHTML = "\u263C " + "Best " + document.getElementById("joblist")
          .options[pick].text;
  document.getElementById("printdwarfgender2").innerHTML = "\u263C";

  var guidename = superbname.toString() + " " + verygoodname.toString() + " " + goodname
          .toString() + " " + highavgname.toString() + " " + lowavgname.toString() + " " + poorname
          .toString() + " " + verypoorname.toString() + " " + horriblename.toString() + " " + deekname.toString();
  guidename = guidename.replace(/,/g, " ");
  guidename = guidename.replace(/\u003B/g, ",");
  document.getElementById("guidance").innerHTML = guidename;

  superbname = [];
  verygoodname = [];
  goodname = [];
  highavgname = [];
  lowavgname = [];
  poorname = [];
  verypoorname = [];
  horriblename = [];
  deekname = [];

}

function namerate(newname, namepct) {

  if (document.getElementById("colorcode").checked == true) {
    var colorred = "style=\"color:red\"";
    var colorblue = "style=\"color:blue\"";
    var colorgreen = "style=\"color:green\"";
  }
  else {
    var colorred;
    var colorblue;
    var colorgreen;
  }

  if (namepct == "deek") {
    newname = "<span " + colorred + ">" + newname + ";</span>";
    (deekname.splice(0, 0, newname));
  }
  else if (namepct > 90) {
    newname = "<span " + colorblue + ">" + newname + ";</span>";
    (superbname.splice(0, 0, newname));
  }
  else if (namepct > 75 && namepct < 91) {
    newname = "<span " + colorblue + ">" + newname + ";</span>";
    (verygoodname.splice(0, 0, newname));
  }
  else if (namepct > 60 && namepct < 76) {
    newname = "<span " + colorblue + ">" + newname + ";</span>";
    (goodname.splice(0, 0, newname));
  }
  else if (namepct > 49 && namepct < 61) {
    newname = "<span " + colorgreen + ">" + newname + ";</span>";
    (highavgname.splice(0, 0, newname));
  }
  else if (namepct > 39 && namepct < 50) {
    newname = "<span " + colorgreen + ">" + newname + ";</span>";
    (lowavgname.splice(0, 0, newname));
  }
  else if (namepct > 24 && namepct < 40) {
    newname = "<span " + colorred + ">" + newname + ";</span>";
    (poorname.splice(0, 0, newname));
  }
  else if (namepct > 9 && namepct < 25) {
    newname = "<span " + colorred + ">" + newname + ";</span>";
    (verypoorname.splice(0, 0, newname));
  }
  else if (namepct < 10) {
    newname = "<span " + colorred + ">" + newname + ";</span>";
    (horriblename.splice(0, 0, newname));
  }

}
function minusattrtopct(newattr) {

  var x = newattr;
  var xpct;

  if (x <= 599) {
    xpct = Math.round((0.0370356 * x) - 5.51835)
  }
  else if (x >= 600 && x <= 799) {
    xpct = Math.round((0.0837487 * x) - 33.5822)
  }
  else if (x >= 800 && x <= 899) {
    xpct = Math.round((0.168333 * x) - 101.333)
  }
  else if (x >= 900 && x <= 999) {
    xpct = Math.round((0.168343 * x) - 101.509)
  }
  else if (x >= 1000 && x <= 1099) {
    xpct = Math.round((0.168343 * x) - 101.676)
  }
  else if (x >= 1100) {
    xpct = Math.round((0.0417669 * x) + 37.3904)
  }
  newattr = xpct;
  return newattr;
}

function avgattrtopct(newattr) {

  var x = newattr;
  var xpct;

  if (x <= 749) {
    xpct = Math.round((0.030357 * x) - 6.0714)
  }
  else if (x >= 750 && x <= 899) {
    xpct = Math.round((0.111852 * x) - 67.2223)
  }
  else if (x >= 900 && x <= 999) {
    xpct = Math.round((0.168333 * x) - 118.166)
  }
  else if (x >= 1000 && x <= 1099) {
    xpct = Math.round((0.168343 * x) - 118.343)
  }
  else if (x >= 1100 && x <= 1299) {
    xpct = Math.round((0.0837538 * x) - 25.4621)
  }
  else if (x >= 1300) {
    xpct = Math.round((0.0238412 * x) + 52.3404)
  }
  newattr = xpct;
  return newattr;
}

function plusattrtopct(newattr) {

  var x = newattr;
  var xpct;

  if (x <= 949) {
    xpct = Math.round((0.0333988 * x) - 15.0295)
  }
  else if (x >= 950 && x <= 1149) {
    xpct = Math.round((0.0837487 * x) - 62.8943)
  }
  else if (x >= 1150 && x <= 1249) {
    xpct = Math.round((0.168333 * x) - 160.249)
  }
  else if (x >= 1250 && x <= 1349) {
    xpct = Math.round((0.168343 * x) - 160.429)
  }
  else if (x >= 1350 && x <= 1549) {
    xpct = Math.round((0.0837538 * x) - 46.4006)
  }
  else if (x >= 1550) {
    xpct = Math.round((0.0238412 * x) + 46.3801)
  }
  newattr = xpct;
  return newattr;
}

function dubplusattrtopct(newattr) {

  var x = newattr;
  var xpct;

  if (x <= 1199) {
    xpct = Math.round((0.0333988 * x) - 23.3792)
  }
  else if (x >= 1200 && x <= 1399) {
    xpct = Math.round((0.0837487 * x) - 83.8315)
  }
  else if (x >= 1400 && x <= 1499) {
    xpct = Math.round((0.168333 * x) - 202.333)
  }
  else if (x >= 1500 && x <= 1599) {
    xpct = Math.round((0.168343 * x) - 202.515)
  }
  else if (x >= 1600 && x <= 1799) {
    xpct = Math.round((0.0837538 * x) - 67.339)
  }
  else if (x >= 1800) {
    xpct = Math.round((0.0238412 * x) + 40.4198)
  }
  newattr = xpct;
  return newattr;
}

function guide() {

  var bodyattrpct = [];
  var soulattrpct = [];


  bodyattrpct[0] = plusattrtopct(bodyattr[0]);
  bodyattrpct[1] = minusattrtopct(bodyattr[1]);
  bodyattrpct[2] = plusattrtopct(bodyattr[2]);
  bodyattrpct[3] = avgattrtopct(bodyattr[3]);
  bodyattrpct[4] = avgattrtopct(bodyattr[4]);
  bodyattrpct[5] = avgattrtopct(bodyattr[5]);

  soulattrpct[0] = plusattrtopct(soulattr[0]);
  soulattrpct[1] = plusattrtopct(soulattr[1]);
  soulattrpct[2] = plusattrtopct(soulattr[2]);
  soulattrpct[3] = avgattrtopct(soulattr[3]);
  soulattrpct[4] = dubplusattrtopct(soulattr[4]);
  soulattrpct[5] = avgattrtopct(soulattr[5]);
  soulattrpct[6] = plusattrtopct(soulattr[6]);
  soulattrpct[7] = dubplusattrtopct(soulattr[7]);
  soulattrpct[8] = avgattrtopct(soulattr[8]);
  soulattrpct[9] = avgattrtopct(soulattr[9]);
  soulattrpct[10] = avgattrtopct(soulattr[10]);
  soulattrpct[11] = avgattrtopct(soulattr[11]);
  soulattrpct[12] = avgattrtopct(soulattr[12]);

  var minbit = Math
          .round((bodyattrpct[0] + bodyattrpct[2] + bodyattrpct[3] + soulattrpct[5] + soulattrpct[7] + soulattrpct[8]) / 6);//STEWSsKs
  var crafter = Math.round((bodyattrpct[1] + soulattrpct[2] + soulattrpct[7] + soulattrpct[8]) / 4);//ACSsKs
  var carpenter = Math
          .round((bodyattrpct[0] + bodyattrpct[1] + soulattrpct[2] + soulattrpct[7] + soulattrpct[8]) / 5);//SACSsKs
  var armwork = Math
          .round((bodyattrpct[0] + bodyattrpct[1] + bodyattrpct[3] + soulattrpct[5] + soulattrpct[7] + soulattrpct[8]) / 6);//SAEWSsKs
  var urist = Math
          .round((bodyattrpct[0] + bodyattrpct[1] + bodyattrpct[3] + soulattrpct[2] + soulattrpct[7] + soulattrpct[8]) / 6);//SAECSsKs
  var ranged = Math.round((bodyattrpct[1] + soulattrpct[4] + soulattrpct[7] + soulattrpct[8]) / 4);//AFSsKs
  var anicar = Math.round((bodyattrpct[1] + soulattrpct[0] + soulattrpct[1] + soulattrpct[11]) / 4);//AAaMEm
  var ickguts = Math.round((bodyattrpct[1] + soulattrpct[8]) / 2);//AKs
  var anitra = Math
          .round((bodyattrpct[1] + bodyattrpct[2] + bodyattrpct[3] + soulattrpct[3] + soulattrpct[6] + soulattrpct[11]) / 6);//ATEIPEm
  var trapper = Math.round((bodyattrpct[1] + soulattrpct[0] + soulattrpct[2] + soulattrpct[7]) / 4);//AAaCSs
  var bonedoc = Math.round((bodyattrpct[0] + bodyattrpct[1] + soulattrpct[4] + soulattrpct[7] + soulattrpct[8]) / 5);//SAFSsKs
  var crutch = Math.round((bodyattrpct[1] + bodyattrpct[3] + soulattrpct[5] + soulattrpct[7] + soulattrpct[8]) / 5);//AEWSsKs
  var whatthat = Math.round((soulattrpct[0] + soulattrpct[1] + soulattrpct[3]) / 3);//AaMI
  var wnddrs = Math.round((bodyattrpct[1] + soulattrpct[7] + soulattrpct[8] + soulattrpct[11]) / 4);//ASsKsEm
  var brewbal = Math.round((bodyattrpct[0] + bodyattrpct[1] + soulattrpct[8]) / 3);//SAKs
  var agri = Math.round((bodyattrpct[0] + bodyattrpct[1] + bodyattrpct[3] + soulattrpct[8]) / 4);//SAEKs
  var behold = Math
          .round((bodyattrpct[0] + bodyattrpct[1] + bodyattrpct[3] + soulattrpct[0] + soulattrpct[2] + soulattrpct[8]) / 6);//SAEAaCKs
  var cook = Math.round((bodyattrpct[1] + soulattrpct[0] + soulattrpct[2] + soulattrpct[8]) / 4);//AAaCKs
  var herbs = Math.round((bodyattrpct[1] + soulattrpct[1] + soulattrpct[8]) / 3);//AMKs
  var ashy = Math.round((bodyattrpct[0] + bodyattrpct[2] + bodyattrpct[3] + soulattrpct[8]) / 4);//STEKs
  var fishclean = Math.round((bodyattrpct[1] + bodyattrpct[3] + soulattrpct[8]) / 3);//AEKs
  var fishcatch = Math
          .round((bodyattrpct[0] + bodyattrpct[1] + soulattrpct[4] + soulattrpct[6] + soulattrpct[8]) / 5);//SAFPKs
  var furnace = Math.round((bodyattrpct[0] + bodyattrpct[2] + bodyattrpct[3] + soulattrpct[0] + soulattrpct[8]) / 5);//STEAaKs
  var cutter = Math.round((bodyattrpct[1] + soulattrpct[0] + soulattrpct[7] + soulattrpct[8]) / 4);//AAaSsKs
  var extract = Math.round((bodyattrpct[0] + bodyattrpct[1] + bodyattrpct[3] + soulattrpct[0] + soulattrpct[8]) / 5);//SAEAaKs
  var mecheng = Math
          .round((bodyattrpct[0] + bodyattrpct[1] + bodyattrpct[3] + soulattrpct[0] + soulattrpct[2] + soulattrpct[7]) / 6);//SAEAaCSs
  var heavy = Math.round((bodyattrpct[0] + bodyattrpct[2] + bodyattrpct[3] + soulattrpct[5] + soulattrpct[8]) / 5);//STEWKs
  var siegeop = ((bodyattrpct[0] + bodyattrpct[2] + bodyattrpct[3] + soulattrpct[0] + soulattrpct[4] + soulattrpct[7]) / 6);//STEAaFSs
  var alch = Math.round((bodyattrpct[1] + soulattrpct[0] + soulattrpct[2] + soulattrpct[3]) / 4);//AAaCI
  var knap = Math.round((bodyattrpct[0] + bodyattrpct[1] + soulattrpct[0] + soulattrpct[7] + soulattrpct[8]) / 5);//SAAaSsKs
  var buildit = Math.round((soulattrpct[0] + soulattrpct[2] + soulattrpct[7]) / 3);//AaCSs
  var manage = Math.round((soulattrpct[0] + soulattrpct[2] + soulattrpct[12]) / 3);//AaCSa
  var bookstud = Math.round((soulattrpct[0] + soulattrpct[1] + soulattrpct[4]) / 3);//AaMF
  var dodger = Math
          .round((bodyattrpct[1] + bodyattrpct[2] + bodyattrpct[3] + soulattrpct[5] + soulattrpct[7] + soulattrpct[8]) / 6);//ATEWSsKs
  var combat = Math
          .round((bodyattrpct[0] + bodyattrpct[1] + bodyattrpct[2] + soulattrpct[5] + soulattrpct[7] + soulattrpct[8]) / 6);//SATWSsKs
  var social = Math.round((soulattrpct[9] + soulattrpct[11] + soulattrpct[12]) / 3);//LEmSa
  var comedy = Math.round((bodyattrpct[1] + soulattrpct[2] + soulattrpct[8] + soulattrpct[9]) / 4);//ACKsL
  var intim = Math.round((bodyattrpct[1] + soulattrpct[8] + soulattrpct[9]) / 3);//AKsL
  var joi = Math.round((soulattrpct[3] + soulattrpct[11] + soulattrpct[12]) / 3);//IEmSa
  var liar = Math.round((soulattrpct[2] + soulattrpct[9] + soulattrpct[12]) / 3);//CLSa
  var concen = Math.round((soulattrpct[4] + soulattrpct[5] + soulattrpct[6]) / 3);//FWP
  var obser = Math.round((soulattrpct[3] + soulattrpct[4] + soulattrpct[7]) / 3);//IFSs
  var tactic = Math.round((soulattrpct[0] + soulattrpct[2] + soulattrpct[3]) / 3);//AaCI
  var druid = Math
          .round((bodyattrpct[1] + bodyattrpct[2] + bodyattrpct[3] + soulattrpct[4] + soulattrpct[5] + soulattrpct[11]) / 6);//ATEFWEm
  var tracker = Math.round((soulattrpct[0] + soulattrpct[4] + soulattrpct[7]) / 3);//AaFSs
  var discip = Math.round((bodyattrpct[4] + soulattrpct[5]) / 2);//FW
  var wordwork = Math.round((soulattrpct[2] + soulattrpct[3] + soulattrpct[9]) / 3);//CIL
  var reading = Math.round((soulattrpct[1] + soulattrpct[4] + soulattrpct[9]) / 3);//MFL
  var speaking = Math.round(soulattrpct[9]);//L
  var coord = Math.round((bodyattrpct[1] + bodyattrpct[7] + soulattrpct[8]) / 3);//ASsKs

  var analysis = [];
  var superb = [];
  var verygood = [];
  var good = [];
  var highavg = [];
  var lowavg = [];
  var poor = [];
  var verypoor = [];
  var horrible = [];

  if (document.getElementById("male").checked == true) {
    var subjpro = "He";
    var objpro = "Him";
    var lexpro = "Himself";
    var posspro = "His";
    var detpro = "His";
  }
  else {
    var subjpro = "She";
    var objpro = "Her";
    var lexpro = "Herself";
    var posspro = "Hers";
    var detpro = "Her";
  }
  if (document.getElementById("colorcode").checked == true) {
    var colorred = "style=\"color:red\"";
    var colorblue = "style=\"color:blue\"";
    var colorgreen = "style=\"color:green\"";
  }
  else {
    var colorred;
    var colorblue;
    var colorgreen;
  }

  function jobrate(newjob, jobpct) {

    if (jobpct > 90) {
      newjob = "<span " + colorblue + ">" + newjob + "</span>";
      (superb.splice(0, 0, newjob));
    }
    else if (jobpct > 75 && jobpct < 91) {
      newjob = "<span " + colorblue + ">" + newjob + "</span>";
      (verygood.splice(0, 0, newjob));
    }
    else if (jobpct > 60 && jobpct < 76) {
      newjob = "<span " + colorblue + ">" + newjob + "</span>";
      (good.splice(0, 0, newjob));
    }
    else if (jobpct > 49 && jobpct < 61) {
      newjob = "<span " + colorgreen + ">" + newjob + "</span>";
      (highavg.splice(0, 0, newjob));
    }
    else if (jobpct > 39 && jobpct < 50) {
      newjob = "<span " + colorgreen + ">" + newjob + "</span>";
      (lowavg.splice(0, 0, newjob));
    }
    else if (jobpct > 24 && jobpct < 40) {
      newjob = "<span " + colorred + ">" + newjob + "</span>";
      (poor.splice(0, 0, newjob));
    }
    else if (jobpct > 9 && jobpct < 25) {
      newjob = "<span " + colorred + ">" + newjob + "</span>";
      (verypoor.splice(0, 0, newjob));
    }
    else if (jobpct < 10) {
      newjob = "<span " + colorred + ">" + newjob + "</span>";
      (horrible.splice(0, 0, newjob));
    }

  }

  jobrate("Socializer;", social);
  jobrate("Ranged combat dwarf;", ranged);
  jobrate("Close combat dwarf;", combat);
// jobrate("Balance;",brewbal);
// jobrate("Coordination;",coord);
// jobrate("Speaker;",speaking);
// jobrate("Reader;",reading);
// jobrate("Writer;",wordwork);
// jobrate("Wordsmith;",wordwork);
// jobrate("Poet;",wordwork);
// jobrate("Disciplinarian;",discip);
// jobrate("Tracker;",tracker);
// jobrate("Druid;",druid);
// jobrate("Military tactician;",tactic);
  jobrate("Student;", bookstud);
  jobrate("Observer;", obser);
// jobrate("Concentrator;",concen); 
  if (perstrait[26] < 40) {
    jobrate("Liar;", liar);
  }
  jobrate("Judge of intent;", joi);
  if (perstrait[10] <= 60) {
    jobrate("Intimidator;", intim);
  }
  if (perstrait[23] <= 75) {
    jobrate("Comedian;", comedy);
  }
  jobrate("Wrestler;", armwork);
  jobrate("Dodger;", dodger);
  jobrate("Biter;", minbit);
  jobrate("Armor user;", heavy);
  jobrate("Record keeper;", bookstud);
  jobrate("Organizer;", manage);
  jobrate("Building designer;", buildit);
  jobrate("Appraiser;", whatthat);
// jobrate("Knapper;",knap);
  jobrate("Swimmer;", armwork);
// jobrate("Alchemist;",alch);
  jobrate("Siege operator;", siegeop);
  jobrate("Siege engineer;", mecheng);
  jobrate("Pump operator;", heavy);
  jobrate("Mechanic;", mecheng);
  jobrate("Strand extractor;", extract);
  jobrate("Wood crafter;", crafter);
  jobrate("Weaver;", crafter);
  jobrate("Stone crafter;", crafter);
  jobrate("Leatherworker;", urist);
  jobrate("Glassmaker;", urist);
  jobrate("Clothier;", crafter);
  jobrate("Bone carver;", crafter);
  jobrate("Gem setter;", crafter);
  jobrate("Gem cutter;", cutter);
  jobrate("Weaponsmith;", urist);
  jobrate("Metalsmith;", urist);
  jobrate("Metal crafter;", urist);
  jobrate("Furnace operator;", furnace);
  jobrate("Armorsmith;", urist);
  jobrate("Fisherdwarf;", fishcatch);
  jobrate("Fish dissector;", ickguts);
  jobrate("Fish cleaner;", fishclean);
  jobrate("Wood burner;", ashy);
  jobrate("Thresher;", agri);
  jobrate("Tanner;", ickguts);
  jobrate("Soaper;", ashy);
  jobrate("Potash maker;", ashy);
  jobrate("Miller;", agri);
  jobrate("Milker;", agri);
  jobrate("Lye maker;", ashy);
  jobrate("Herbalist;", herbs);
  jobrate("Grower;", agri);
  jobrate("Dyer;", agri);
  jobrate("Cook;", cook);
  jobrate("Cheese maker;", behold);
  jobrate("Butcher;", agri);
  jobrate("Brewer;", brewbal);
  jobrate("Wound dresser;", wnddrs);
  jobrate("Suturer;", ranged);
  jobrate("Surgeon;", ranged);
  jobrate("Diagnostician;", whatthat);
  jobrate("Crutch walker;", crutch);
  jobrate("Bone doctor;", bonedoc);
  jobrate("Trapper;", trapper);
  jobrate("Animal trainer;", anitra);
  jobrate("Animal dissector;", ickguts);
// jobrate("Animal caretaker;",anicar);
// jobrate("Ambusher;",ranged);
  jobrate("Mason;", urist);
  jobrate("Engraver;", crafter);
  jobrate("Wood cutter;", armwork);
  jobrate("Carpenter;", carpenter);
  jobrate("Bowyer;", crafter);
  jobrate("Miner;", minbit);


  if (superb.length >= 1) {
    superb.splice(0, 0, subjpro + " bears the mien of a superb ");
    superb[(superb.length - 1)] = superb[(superb.length - 1)].replace(/;/g, ".");
  }
  if (superb.length >= 3) {
    superb[(superb.length - 2)] = superb[(superb.length - 2)] + " and ";
  }
  if (verygood.length >= 1) {
    verygood.splice(0, 0, subjpro + " has the potential to be a very good ");
    verygood[(verygood.length - 1)] = verygood[(verygood.length - 1)].replace(/;/g, ".");
  }
  if (verygood.length >= 3) {
    verygood[(verygood.length - 2)] = verygood[(verygood.length - 2)] + " and ";
  }
  if (good.length >= 1) {
    good.splice(0, 0, subjpro + " has the look of a good ");
    good[(good.length - 1)] = good[(good.length - 1)].replace(/;/g, ".");
  }
  if (good.length >= 3) {
    good[(good.length - 2)] = good[(good.length - 2)] + " and ";
  }
  if (highavg.length >= 1) {
    highavg.splice(0, 0, subjpro + " will be a little better than most as a ");
    highavg[(highavg.length - 1)] = highavg[(highavg.length - 1)].replace(/;/g, ".");
  }
  if (highavg.length >= 3) {
    highavg[(highavg.length - 2)] = highavg[(highavg.length - 2)] + " and ";
  }
  if (lowavg.length >= 1) {
    lowavg.splice(0, 0, subjpro + " comes across as a below average ");
    lowavg[(lowavg.length - 1)] = lowavg[(lowavg.length - 1)].replace(/;/g, ".");
  }
  if (lowavg.length >= 3) {
    lowavg[(lowavg.length - 2)] = lowavg[(lowavg.length - 2)] + " and ";
  }
  if (poor.length >= 1) {
    poor.splice(0, 0, subjpro + " will make a poor ");
    poor[(poor.length - 1)] = poor[(poor.length - 1)].replace(/;/g, ".");
  }
  if (poor.length >= 3) {
    poor[(poor.length - 2)] = poor[(poor.length - 2)] + " and ";
  }
  if (verypoor.length >= 1) {
    verypoor.splice(0, 0, subjpro + " seems like a very poor ");
    verypoor[(verypoor.length - 1)] = verypoor[(verypoor.length - 1)].replace(/;/g, ".");
  }
  if (verypoor.length >= 3) {
    verypoor[(verypoor.length - 2)] = verypoor[(verypoor.length - 2)] + " and ";
  }
  if (horrible.length >= 1) {
    horrible.splice(0, 0, subjpro + " would be horrible as a ");
    horrible[(horrible.length - 1)] = horrible[(horrible.length - 1)].replace(/;/g, ".");
  }
  if (horrible.length >= 3) {
    horrible[(horrible.length - 2)] = horrible[(horrible.length - 2)] + " and ";
  }
  if (document.getElementById("brightside").checked == true && superb.length + verygood.length + good.length + highavg
          .length < 20) {
    analysis.splice(0, 0, superb + " " + verygood + " " + good + " " + highavg + " " + lowavg);
  }
  else if (document.getElementById("brightside").checked == true && superb.length + verygood.length + good
          .length < 20) {
    analysis.splice(0, 0, superb + " " + verygood + " " + good + " " + highavg);
  }
  else if (document.getElementById("brightside").checked == true) {
    analysis.splice(0, 0, superb + " " + verygood + " " + good);
  }
  else {
    analysis.splice(0, 0, superb + " " + verygood + " " + good + " " + poor + " " + verypoor + " " + horrible);
  }

  if (perstrait[24] < 25) {
    analysis.splice(0, 0, "This lazy sack of booze prefers to spend time <span " + colorred + ">On Break.</span>");
  }
  else if (perstrait[24] > 75) {
    analysis
            .splice(0, 0, "Excellent! " + detpro + " breaks will be <span " + colorblue + ">shorter</span> than most.");
  }
  if (perstrait[4] < 25) {
    analysis.splice(0, 0, subjpro + " can't find the spirit to <span " + colorred + ">rage</span> in battle.");
  }
  else if (perstrait[4] > 75) {
    analysis.splice(0, 0, "When battles go poorly, " + subjpro
            .toLowerCase() + " is prone to flying against the enemy in a <span " + colorblue + ">rage.</span>");
  }
  if (perstrait[3] < 40) {
    analysis
            .splice(0, 0, subjpro + " seems unhappy at the thought of <span " + colorred + ">helping others</span>.");
  }
  else if (perstrait[3] > 60) {
    analysis
            .splice(0, 0, subjpro + " seems happy at the thought of <span " + colorblue + ">helping others</span>.");
  }
  if (perstrait[7] < 40) {
    analysis.splice(0, 0, detpro + " unassertive nature won't allow " + objpro
            .toLowerCase() + " to attempt <span " + colorred + ">Persuasion</span>.");
  }
  if (perstrait[10] < 40) {
    analysis.splice(0, 0, subjpro + " cannot be relied on to <span " + colorred + ">Pacify</span> others.");
  }
  else if (perstrait[10] > 60) {
    analysis.splice(0, 0, "A communitarian dwarf; " + subjpro
            .toLowerCase() + " will never <span " + colorred + ">Intimidate</span> others.");
  }
  if (perstrait[15] < 40) {
    analysis.splice(0, 0, "When others try to start a <span " + colorred + ">Conversation</span>; " + subjpro
            .toLowerCase() + " doesn't respond.");
  }
  if (perstrait[23] > 75) {
    analysis.splice(0, 0, "Held back by self-consciousness; " + subjpro
            .toLowerCase() + " will not attempt <span " + colorred + ">Comedy</span>.");
  }
  if (perstrait[26] < 40) {
    analysis.splice(0, 0, subjpro + " cannot be honest enough to <span " + colorred + ">Console</span> another.");
  }
  else if (perstrait[26] > 39 && perstrait[26] < 61) {
    analysis.splice(0, 0, subjpro + " is too direct to <span " + colorred + ">Lie</span>.");
  }
  else if (perstrait[26] > 60) {
    analysis
            .splice(0, 0, subjpro + " is too straightforward to <span " + colorred + ">Lie</span> or <span " + colorred + ">Flatter</span>.");
  }

  analysis = analysis.reverse();
  var guideprint = analysis.toString();
  guideprint = guideprint.replace(/,/g, " ");
  guideprint = guideprint.replace(/\u003B/g, ",");
  document.getElementById("guidance").innerHTML = guideprint;
}


</script>
</head>
<body>
Welcome to the Dwarven Guidance Counselor. I'll be offering you advice today. Shall I color-code your evaluation? <input
        type="checkbox" id="colorcode" checked><br>
What's your name, please? <input type="text" id="dwarfname" value="Urist McAverage"
                                 onKeyPress="return disableEnterKey(event)" onkeyup="printname()">
And your gender? <input type="radio" name="gender" id="male" value="Male" checked="checked"
                        onclick="printgender(this.value)">Male</input> <input type="radio" name="gender" id="female"
                                                                              value="Female"
                                                                              onclick="printgender(this.value)">Female</input>
&nbsp;Are we looking on the bright side today? <input type="checkbox" id="brightside"><br>


<p>
<table>

  <tr>
    <td valign="top">Load from XML</td>
    <td><select id="dwarflist" onchange="xmlprocess()">
      <option>Dwarf List</option>
    </select></td>
    <td>&nbsp;Find Best&nbsp;
      <select id="joblist" onchange="bestdorf()">

        <option>Embark Facts</option>
        <option>Leader/Manager</option>
        <option>Broker</option>
        <option>Close combat dwarf</option>
        <option>Ranged combat dwarf</option>
        <option>Socializer</option>
        <option>Miner</option>
        <option>Bowyer</option>
        <option>Carpenter</option>
        <option>Wood cutter</option>
        <option>Engraver</option>

        <option>Mason</option>
        <option>Animal dissector</option>
        <option>Animal trainer</option>
        <option>Trapper</option>
        <option>Bone doctor</option>
        <option>Crutch walker</option>
        <option>Diagnostician</option>
        <option>Surgeon</option>
        <option>Suturer</option>
        <option>Wound dresser</option>

        <option>Brewer</option>
        <option>Butcher</option>
        <option>Cheese maker</option>
        <option>Cook</option>
        <option>Dyer</option>
        <option>Grower</option>
        <option>Herbalist</option>
        <option>Lye maker</option>
        <option>Milker</option>
        <option>Miller</option>

        <option>Potash maker</option>
        <option>Soaper</option>
        <option>Tanner</option>
        <option>Thresher</option>
        <option>Wood burner</option>
        <option>Fish cleaner</option>
        <option>Fish dissector</option>
        <option>Fisherdwarf</option>
        <option>Armorsmith</option>
        <option>Furnace operator</option>

        <option>Metal crafter</option>
        <option>Metalsmith</option>
        <option>Weaponsmith</option>
        <option>Gem cutter</option>
        <option>Gem setter</option>
        <option>Bone carver</option>
        <option>Clothier</option>
        <option>Glassmaker</option>
        <option>Leatherworker</option>
        <option>Stone crafter</option>

        <option>Weaver</option>
        <option>Wood crafter</option>
        <option>Strand extractor</option>
        <option>Mechanic</option>
        <option>Pump operator</option>
        <option>Siege engineer</option>
        <option>Siege operator</option>
        <option>Swimmer</option>
        <option>Appraiser</option>
        <option>Building designer</option>

        <option>Organizer</option>
        <option>Record keeper</option>
        <option>Armor user</option>
        <option>Biter</option>
        <option>Dodger</option>
        <option>Wrestler</option>
        <option>Comedian</option>
        <option>Intimidator</option>
        <option>Judge of intent</option>
        <option>Liar</option>

        <option>Observer</option>
        <option>Student</option>

      </select>
    </td>
    <td valign="top" rowspan="5">Find Best Among:
      <p>
        <select id="dorfsfrom" multiple="true" size="6" onchange="bestdorf()">
          <option>All Dwarves</option>
        </select>
    </td>
    <td valign="top" rowspan="5">
      Last 5 updates (most recent first):<p>
      <a id="changelogoutput"> </a>
    </td>
  </tr>

  <tr>
    <td valign="top">Body Attributes&nbsp;</td>
    <td><input type="text" id="directbodynum" maxlength="4" onKeyPress="return disablebodyenter(event)"></td>
    <td>
      <select id="directbody">
        <option>Strength</option>
        <option>Agility</option>
        <option>Toughness</option>
        <option>Endurance</option>
        <option>Disease Resistance</option>
        <option>Recuperation</option>
      </select>
      <button type="button" onclick="directbodysubmit()">Update</button>
    </td>
  </tr>

  <tr>
    <td valign="top">Soul Attributes&nbsp;</td>
    <td><input type="text" id="directsoulnum" maxlength="4" onKeyPress="return disablesoulenter(event)"></td>
    <td>
      <select id="directsoul">
        <option>Analytical Ability</option>
        <option>Memory</option>
        <option>Creativity</option>
        <option>Intuition</option>
        <option>Focus</option>
        <option>Willpower</option>
        <option>Patience</option>
        <option>Spatial Sense</option>
        <option>Kinesthetic Sense</option>
        <option>Linguistic Ability</option>
        <option>Musicality</option>
        <option>Empathy</option>
        <option>Social Awareness</option>
      </select>
      <button type="button" onclick="directsoulsubmit()">Update</button>
    </td>
  </tr>

  <tr>
    <td valign="top">Personality Traits&nbsp;</td>
    <td><input type="text" id="directpersnum" maxlength="3" onKeyPress="return disablepersenter(event)"></td>
    <td>
      <select id="directpers">
        <option>Achievement Striving (Excellence)</option>
        <option>Activity Level (Activeness)</option>
        <option>Adventurousness (Adventure)</option>
        <option>Altruism (Helpfulness)</option>
        <option>Anger (Rage)</option>
        <option>Anxiety (Nervousness)</option>
        <option>Artistic Interest (Artistic)</option>
        <option>Assertiveness (Leadership)</option>
        <option>Cautiousness</option>
        <option>Cheerfulness (Optimism)</option>
        <option>Cooperation (Compromising)</option>
        <option>Depression</option>
        <option>Dutifulness (Lawfulness)</option>
        <option>Emotionality (Emotion)</option>
        <option>Excitement Seeking (Thrillseeking)</option>
        <option>Friendliness (Friendly)</option>
        <option>Gregariousness (Company)</option>
        <option>Imagination</option>
        <option>Immoderation (Urge)</option>
        <option>Intellectual Curiosity (Thinking)</option>
        <option>Liberalism (Rebelliousness)</option>
        <option>Modesty</option>
        <option>Orderliness (Organization)</option>
        <option>Self-Consciousness (Neurosis)</option>
        <option>Self-Discipline (Perseverance)</option>
        <option>Self-Efficacy (Confidence)</option>
        <option>Straightforwardness (Honesty)</option>
        <option>Sympathy (Compassion)</option>
        <option>Trust (Trusting)</option>
        <option>Vulnerability (Stress)</option>
      </select>
      <button type="button" onclick="directperssubmit()">Update</button>
      &nbsp;
    </td>
  </tr>

  <tr>
    <td valign="top">Thoughts and Preferences&nbsp;</td>
    <td colspan="2"></td>
  </tr>

</table>

<br>
<table border="1">
  <tr>
    <td colspan="3">
      <div style="text-align:center"><b>Attributes and Traits of: <a id="printdwarf">Urist McAverage</a>, <a
              id="printdwarfgender">&#9794;</a></b></div>
    </td>
    <td rowspan="19" valign="top" style="width:350px">
      <div style="text-align:center"><b>Guidance for: <a id="printdwarf2">Urist McAverage</a>, <a
              id="printdwarfgender2">&#9794;</a></b></div>
      <a id="guidance">A short, sturdy creature fond of drink and industry.</a></td>
  </tr>
  <tr>
    <th>Body Attributes</th>
    <th>Soul Attributes</th>
    <th>Personality Traits</th>
  </tr>
  <tr>
    <td><a id="bodyattr0"> </a>&nbsp;Strength</td>
    <td><a id="soulattr10"> </a>&nbsp;Musicality</td>
    <td><a id="perstrait13"> </a>&nbsp;Emotionality</td>
  </tr>
  <tr>
    <td><a id="bodyattr1"> </a>&nbsp;Agility</td>
    <td><a id="soulattr11"> </a>&nbsp;Empathy</td>
    <td><a id="perstrait14"> </a>&nbsp;Excitement Seeking</td>
  </tr>
  <tr>
    <td><a id="bodyattr2"> </a>&nbsp;Toughness</td>
    <td><a id="soulattr12"> </a>&nbsp;Social Awareness</td>
    <td><a id="perstrait15"> </a>&nbsp;Friendliness</td>
  </tr>
  <tr>
    <td><a id="bodyattr3"> </a>&nbsp;Endurance</td>
    <th>Personality Traits</th>
    <td><a id="perstrait16"> </a>&nbsp;Gregariousness</td>
  </tr>
  <tr>
    <td><a id="bodyattr4"> </a>&nbsp;Disease Resistance</td>
    <td><a id="perstrait0"> </a>&nbsp;Achievement Striving</td>
    <td><a id="perstrait17"> </a>&nbsp;Imagination</td>
  </tr>
  <tr>
    <td><a id="bodyattr5"> </a>&nbsp;Recuperation</td>
    <td><a id="perstrait1"> </a>&nbsp;Activity Level</td>
    <td><a id="perstrait18"> </a>&nbsp;Immoderation</td>
  </tr>
  <tr>
    <th>Soul Attributes</th>
    <td><a id="perstrait2"> </a>&nbsp;Adventurousness</td>
    <td><a id="perstrait19"> </a>&nbsp;Intellectual Curiosity</td>
  </tr>
  <tr>
    <td><a id="soulattr0"> </a>&nbsp;Analytical Ability</td>
    <td><a id="perstrait3"> </a>&nbsp;Altruism</td>
    <td><a id="perstrait20"> </a>&nbsp;Liberalism</td>
  </tr>
  <tr>
    <td><a id="soulattr1"> </a>&nbsp;Memory</td>
    <td><a id="perstrait4"> </a>&nbsp;Anger</td>
    <td><a id="perstrait21"> </a>&nbsp;Modesty</td>
  </tr>
  <tr>
    <td><a id="soulattr2"> </a>&nbsp;Creativity</td>
    <td><a id="perstrait5"> </a>&nbsp;Anxiety</td>
    <td><a id="perstrait22"> </a>&nbsp;Orderliness</td>
  </tr>
  <tr>
    <td><a id="soulattr3"> </a>&nbsp;Intuition</td>
    <td><a id="perstrait6"> </a>&nbsp;Artistic Interest</td>
    <td><a id="perstrait23"> </a>&nbsp;Self-Consciousness</td>
  </tr>
  <tr>
    <td><a id="soulattr4"> </a>&nbsp;Focus</td>
    <td><a id="perstrait7"> </a>&nbsp;Assertiveness</td>
    <td><a id="perstrait24"> </a>&nbsp;Self-Discipline</td>
  </tr>
  <tr>
    <td><a id="soulattr5"> </a>&nbsp;Willpower</td>
    <td><a id="perstrait8"> </a>&nbsp;Cautiousness</td>
    <td><a id="perstrait25"> </a>&nbsp;Self-Efficacy</td>
  </tr>
  <tr>
    <td><a id="soulattr6"> </a>&nbsp;Patience</td>
    <td><a id="perstrait9"> </a>&nbsp;Cheerfulness</td>
    <td><a id="perstrait26"> </a>&nbsp;Straightforwardness</td>
  </tr>
  <tr>
    <td><a id="soulattr7"> </a>&nbsp;Spatial Sense</td>
    <td><a id="perstrait10"> </a>&nbsp;Cooperation</td>
    <td><a id="perstrait27"> </a>&nbsp;Sympathy</td>
  </tr>
  <tr>
    <td><a id="soulattr8"> </a>&nbsp;Kinesthetic Sense</td>
    <td><a id="perstrait11"> </a>&nbsp;Depression</td>
    <td><a id="perstrait28"> </a>&nbsp;Trust</td>
  </tr>
  <tr>
    <td><a id="soulattr9"> </a>&nbsp;Linguistic Ability</td>
    <td><a id="perstrait12"> </a>&nbsp;Dutifulness</td>
    <td><a id="perstrait29"> </a>&nbsp;Vulnerability</td>
  </tr>
</table>
<script type="text/javascript">
  <!--

  bodyupdate();
  soulupdate();
  traitupdate();
  xmlupdate();


  //-->
</script>

<h3>Instructions</h3>

<p>
  Enter your dwarf's name and gender to customize report.<br>
  Load from XML instructions in attached README.<br>
  Ctrl-click in Find Best Among to select additional dwarf. Shift-click to select range of dwarves.<br>
  View your dwarf's thoughts and preferences, and enter those phrases that reflect the level of an attribute or trait.
  The Counselor will update to an approximate value.<br>
  Tell the Counselor "average &lt;statname&gt;" and it'll return to default racial median. Try "strong", then "average
  strength". Refresh page to revert to average entirely.<br>
  Alternatively, use Runesmith and Dwarf Therapist to find attributes and traits respectively, and update by hand.<br>
  Runesmith/Dwarf Therapist trait names are those in parentheses in the dropdown.<br>

<h3>Thanks/Info</h3>

<p>
  To <a href="http://www.bay12forums.com/smf/index.php?topic=72616.0">Urist Da Vinci</a> for SCIENCE<br>
  <a href="http://df.magmawiki.com/">The Dwarf Fortress Wiki</a> for all the intel.<br>
  <a href="http://code.google.com/p/dwarftherapist/">Dwarf Therapist</a> for helping me manage my dorfs.<br>
  <a href="http://dffd.wimbli.com/file.php?id=2538">Runesmith</a> for that next level of fortress control.<br>
  And of course <a href="http://bay12games.com/dwarves/">Bay 12 Games</a> themselves, for allowing me to build and
  discard so many worlds.<br>

<p>
  I am <a href="http://www.bay12forums.com/smf/index.php?action=profile;u=16843">knaveofstaves</a>, and this is <a
        href="http://www.bay12forums.com/smf/index.php?topic=83112">the DGC forum thread.</a><br>
  <a href="http://dffd.wimbli.com/file.php?id=4238">Dwarven Guidance Counselor</a> project page at the Dwarf Fortress
  File Depot.<br>
  DGC 0.0.6 was tested against Firefox 4.0.1 and Internet Explorer 9.0.8, and designed with Dwarf Fortress 0.31.21,
  Dwarf Therapist 0.6.10, and Runesmith 0.1.9.

</body>
</html>