<project name="DwarfGuide-MPS-default" default="main">
  <property file="${ant.file}/../DwarfGuide-MPS.properties" />
  <property file="${base_dir}/build/local.properties" />
  <import file="${ant.file}/../DwarfGuide-MPS-compile.xml" />
  <import file="${ant.file}/../DwarfGuide-MPS-languages.xml" />
  <target name="main" depends="compile,clean.before,folders.create,do.the.job,clean.after" />
  <target name="compile">
    <antcall target="compile.all" />
  </target>
  <target name="clean.before" depends="compile">
    <delete dir="${deploy.dir}" />
    <tstamp />
  </target>
  <target name="folders.create" depends="clean.before">
    <mkdir dir="${deploy.dir}" />
    <mkdir dir="${deploy.dir}/DwarfGuide-MPS.zip.tmp/DwarfGuide-MPS" />
    <mkdir dir="${deploy.dir}/DwarfGuide-MPS.zip.tmp" />
  </target>
  <target name="do.the.job" depends="folders.create">
    <antcall target="DwarfGuide-MPS-languages.pack.net.dwarfguide.creature" />
    <antcall target="DwarfGuide-MPS-languages.pack.net.dwarfguide.model" />
    <mkdir dir="${deploy.dir}/DwarfGuide-MPS.zip.tmp/DwarfGuide-MPS" />
    <zip destfile="${deploy.dir}/DwarfGuide-MPS.zip" duplicate="preserve" filesonly="true">
      <zipfileset dir="${deploy.dir}/DwarfGuide-MPS.zip.tmp" />
    </zip>
    <delete dir="${deploy.dir}/DwarfGuide-MPS.zip.tmp" />
  </target>
  <target name="clean.after" depends="do.the.job">
    <delete dir="${deploy.dir}/DwarfGuide-MPS.zip.tmp" />
  </target>
</project>
