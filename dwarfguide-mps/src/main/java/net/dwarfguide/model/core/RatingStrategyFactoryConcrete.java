package net.dwarfguide.model.core;

/*Generated by MPS */

import net.dwarfguide.creature.runtime.RatingStrategyFactory;
import java.util.Map;
import net.dwarfguide.creature.runtime.RaceProfession;
import net.dwarfguide.creature.runtime.RatingStrategy;
import javax.inject.Inject;
import net.dwarfguide.creature.runtime.CreatureStatisticsManager;
import jetbrains.mps.internal.collections.runtime.MapSequence;
import java.util.HashMap;
import net.dwarfguide.creature.runtime.Creature;

public class RatingStrategyFactoryConcrete implements RatingStrategyFactory {
  private Map<RaceProfession, RatingStrategy> strategies;

  @Inject
  public RatingStrategyFactoryConcrete(CreatureStatisticsManager statisticsManager) {
    strategies = MapSequence.fromMap(new HashMap<RaceProfession, RatingStrategy>());
    MapSequence.fromMap(strategies).put(new RaceProfession(RaceEnum.DWARF, ProfessionEnum.ARMORER), new RatingArmorerDwarf(statisticsManager));
    MapSequence.fromMap(strategies).put(new RaceProfession(RaceEnum.DWARF, ProfessionEnum.MINER), new AttributeRatingMinerDwarf(statisticsManager));
  }

  public RatingStrategy getStrategy(RaceEnum raceEnum, ProfessionEnum professionEnum) {
    if (MapSequence.fromMap(strategies).containsKey(new RaceProfession(raceEnum, professionEnum))) {
      return MapSequence.fromMap(strategies).get(new RaceProfession(raceEnum, professionEnum));
    }
    // No strategy found, return NullObject 
    return new RatingStrategy() {
      public int getRating(Creature creature) {
        return 0;
      }
    };
  }
}
