package net.dwarfguide.model.core;

/*Generated by MPS */

import org.simpleframework.xml.convert.Converter;
import java.util.regex.Pattern;
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.simpleframework.xml.stream.InputNode;
import java.util.regex.Matcher;
import org.simpleframework.xml.stream.OutputNode;


/**
 * * @author Dmitry Sidorenko
 */
public class IntegerInBracketsConverter implements Converter<Integer> {
  private static final Pattern BRACKETS_PATTERN = Pattern.compile(".* \\[(\\d*)\\]");
  protected static Log log = LogFactory.getLog(IntegerInBracketsConverter.class);

  public IntegerInBracketsConverter() {
  }

  @Override
  public Integer read(InputNode node) throws Exception {
    String value = node.getValue();
    Matcher matcher = BRACKETS_PATTERN.matcher(value);
    if (matcher.find()) {
      return Integer.valueOf(matcher.group(1));
    }
    if (log.isWarnEnabled()) {
      log.warn("Can't read happiness from node: " + node);
    }
    return 0;
  }

  @Override
  public void write(OutputNode node, Integer value) throws Exception {
    throw new UnsupportedOperationException();
  }
}
